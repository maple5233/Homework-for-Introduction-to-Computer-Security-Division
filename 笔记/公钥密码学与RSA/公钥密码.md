[TOC]

# 公钥密码

## 概述

​	**公开密钥加密**（又译为**公开密钥加密**），也称为**非对称加密**（asymmetric cryptography），一种密码学算法类型，在这种密码学方法中，需要一对密钥，一个是私钥，另一个则是公钥。这两个密钥是**数学相关**，用某用户密钥加密后所得的信息，只能用该用户的解密密钥才能解密。如果**知道了其中一个，并不能计算出另外一个**。因此如果公开了一对密钥中的一个，并不会危害到另外一个的秘密性质。

用途有两种：

+ 如果加密密钥是公钥，这用于客户给私钥所有者上传加密的数据，这被称作为**公开密钥加密**（狭义）。例如，网络银行的客户发给银行网站的账户操作的加密数据。
+ 如果解密密钥是公钥，用私钥加密的信息，可以用公钥对其解密，用于客户验证持有私钥一方发布的数据或文件是**完整准确**的，接收者由此可知这条信息确实来自于拥有私钥的某人，这被称作**数字签名**，**公钥的形式就是数字证书**。例如，从网上下载的安装程序，一般都带有程序制作者的数字签名，可以证明该程序的确是该作者（公司）发布的而不是第三方伪造的且未被篡改过。

常见的公钥加密算法有：

+ RSA （使用最广泛）
+ ElGamal （另一种常用的非对称加密算法）
+ 背包算法
+ Rabin（RSA的特例）
+ 迪菲－赫尔曼密钥交换协议中的公钥加密算法
+ 椭圆曲线加密算法（ ECC）

## 与对称密码学的比较

+ 公钥加密无需共享的通用密钥，解密的私钥不发往任何用户。即使公钥在网上被截获，如果没有与其匹配的私钥，也无法解密，所截获的公钥是没有任何用处的。
+ 公钥加密只能加密少量的数据，因此，一个完整的密码体系，往往通过公钥加密来创建私有秘钥，然后用私有秘钥通过对称密码学加密大量数据。
+ 公钥加密的另一个功能 —— 数字签名 ，则是对称密钥加密无法实现的。

## 公开密钥指纹

在公开密钥加密中，**公开密钥指纹**（下称：**公钥指纹**）是用于标识较长公共密钥字节的短序列。指纹通过应用加密散列函数到一个公共密钥来实现。由于指纹较比生成它们的密钥短得多，因此可以用来简化某些密钥的管理任务。

### 创建过程

生成公钥指纹的概括步骤如下：

1. 公钥（以及任选的一些额外数据）被编码成一个字节序列，以确保同一指纹以后在相同情况下可以创建，因此编码必须是确定的，并且任何附加的数据必须与公共密钥一同存放。附加数据通常是使用此公共密钥的人应该知道的信息，如：密钥持有人的身份
2. 在前面步骤中产生的数据被散列加密，如使用[SHA-1](https://zh.wikipedia.org/wiki/SHA-1)或[SHA-2](https://zh.wikipedia.org/wiki/SHA-2)。
3. 如果需要，散列函数的输出可以缩短，以提供更方便管理的指纹。

产生的短指纹可用于验证一个很长的公共密钥。例如，一个典型RSA公共密钥的长度会在1024位以上，MD5或SHA-1的指纹却只有128或160位。

当指纹被显示时，通常被编码成十六进制字符串。然后，这些字符串格式化成可读性字符组。例如，如一个128位的MD5指纹SSH将被显示为：

```reStructuredText
 43:51:43:a1:b5:fc:8b:b7:0a:3a:a9:b1:0f:66:73:a8
```

### 安全性

1. 公钥指纹主要的安全威胁是[原像攻击](https://zh.wikipedia.org/w/index.php?title=%E5%8E%9F%E5%83%8F%E6%94%BB%E5%87%BB&action=edit&redlink=1)，攻击者构造一个密钥对，与受害者可生成的指纹相匹配，即可能伪装成受害者；
2. 某些系统的第二个威胁是[碰撞攻击](https://zh.wikipedia.org/w/index.php?title=%E7%A2%B0%E6%92%9E%E6%94%BB%E5%87%BB&action=edit&redlink=1)，这可能允许攻击者否认他所创造的签名，或导致其他混淆。
3. 在指纹长度必须不惜一切代价最小化的情况下，在技术上，如使用散列扩展可提升安全性。